{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect, useCallback } from 'react';\nimport membershipPlansService from '../services/membershipPlans.service';\nexport const useMembershipPlans = (includeInactive = false) => {\n  _s();\n  const [plans, setPlans] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const fetchPlans = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      const data = await membershipPlansService.getAll(includeInactive);\n      setPlans(data);\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.detail) || 'Error al cargar los planes');\n      console.error('Error fetching membership plans:', err);\n    } finally {\n      setLoading(false);\n    }\n  }, [includeInactive]);\n  useEffect(() => {\n    fetchPlans();\n  }, [fetchPlans]);\n  const createPlan = async planData => {\n    try {\n      const newPlan = await membershipPlansService.create(planData);\n      setPlans(prev => [newPlan, ...prev]);\n      return newPlan;\n    } catch (err) {\n      throw err;\n    }\n  };\n  const updatePlan = async (planId, planData) => {\n    try {\n      const updatedPlan = await membershipPlansService.update(planId, planData);\n      setPlans(prev => prev.map(p => p.id === planId ? updatedPlan : p));\n      return updatedPlan;\n    } catch (err) {\n      throw err;\n    }\n  };\n  const deletePlan = async planId => {\n    try {\n      await membershipPlansService.delete(planId);\n      setPlans(prev => prev.filter(p => p.id !== planId));\n    } catch (err) {\n      throw err;\n    }\n  };\n  const toggleStatus = async planId => {\n    try {\n      const updatedPlan = await membershipPlansService.toggleStatus(planId);\n      setPlans(prev => prev.map(p => p.id === planId ? updatedPlan : p));\n      return updatedPlan;\n    } catch (err) {\n      throw err;\n    }\n  };\n  return {\n    plans,\n    loading,\n    error,\n    refetch: fetchPlans,\n    createPlan,\n    updatePlan,\n    deletePlan,\n    toggleStatus\n  };\n};\n_s(useMembershipPlans, \"0RZF5wphfI4/P9J7fF8s3LSVTY0=\");\nexport default useMembershipPlans;","map":{"version":3,"names":["useState","useEffect","useCallback","membershipPlansService","useMembershipPlans","includeInactive","_s","plans","setPlans","loading","setLoading","error","setError","fetchPlans","data","getAll","err","_err$response","_err$response$data","response","detail","console","createPlan","planData","newPlan","create","prev","updatePlan","planId","updatedPlan","update","map","p","id","deletePlan","delete","filter","toggleStatus","refetch"],"sources":["C:/Users/oussb/OneDrive/Escritorio/saas_gym v/gymcore/frontend/src/hooks/useMembershipPlans.js"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\r\nimport membershipPlansService from '../services/membershipPlans.service';\r\n\r\nexport const useMembershipPlans = (includeInactive = false) => {\r\n  const [plans, setPlans] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  const fetchPlans = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      const data = await membershipPlansService.getAll(includeInactive);\r\n      setPlans(data);\r\n    } catch (err) {\r\n      setError(err.response?.data?.detail || 'Error al cargar los planes');\r\n      console.error('Error fetching membership plans:', err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [includeInactive]);\r\n\r\n  useEffect(() => {\r\n    fetchPlans();\r\n  }, [fetchPlans]);\r\n\r\n  const createPlan = async (planData) => {\r\n    try {\r\n      const newPlan = await membershipPlansService.create(planData);\r\n      setPlans(prev => [newPlan, ...prev]);\r\n      return newPlan;\r\n    } catch (err) {\r\n      throw err;\r\n    }\r\n  };\r\n\r\n  const updatePlan = async (planId, planData) => {\r\n    try {\r\n      const updatedPlan = await membershipPlansService.update(planId, planData);\r\n      setPlans(prev => prev.map(p => p.id === planId ? updatedPlan : p));\r\n      return updatedPlan;\r\n    } catch (err) {\r\n      throw err;\r\n    }\r\n  };\r\n\r\n  const deletePlan = async (planId) => {\r\n    try {\r\n      await membershipPlansService.delete(planId);\r\n      setPlans(prev => prev.filter(p => p.id !== planId));\r\n    } catch (err) {\r\n      throw err;\r\n    }\r\n  };\r\n\r\n  const toggleStatus = async (planId) => {\r\n    try {\r\n      const updatedPlan = await membershipPlansService.toggleStatus(planId);\r\n      setPlans(prev => prev.map(p => p.id === planId ? updatedPlan : p));\r\n      return updatedPlan;\r\n    } catch (err) {\r\n      throw err;\r\n    }\r\n  };\r\n\r\n  return {\r\n    plans,\r\n    loading,\r\n    error,\r\n    refetch: fetchPlans,\r\n    createPlan,\r\n    updatePlan,\r\n    deletePlan,\r\n    toggleStatus\r\n  };\r\n};\r\n\r\nexport default useMembershipPlans;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}